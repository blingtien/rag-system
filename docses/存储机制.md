RAG-Anything实际上拥有完整的LightRAG存储架构，包括所有9个存储组件！

  LightRAG存储组件配置 (从代码验证)

  向量存储 (3个):
    entities_vdb: "./rag_storage/vdb_entities.json"
    relationships_vdb: "./rag_storage/vdb_relationships.json"
    chunks_vdb: "./rag_storage/vdb_chunks.json"

  KV存储 (4个):
    full_docs: "kv_store_full_docs.json"
    text_chunks: "kv_store_text_chunks.json"
    doc_status: "kv_store_doc_status.json" ✅ (已存在)
    llm_response_cache: "kv_store_llm_response_cache.json" ✅ (已存在)

  图存储 (1个):
    chunk_entity_relation_graph: namespace="chunk_entity_relation"

  其他存储 (1个):
    parse_cache: "kv_store_parse_cache.json" ✅ (已存在)

      存储架构对比：实际vs文档

  | 存储组件  | LightRAG文档                    | RAG-Anything实现                | 状态   |
  |-------|-------------------------------|-------------------------------|------|
  | 架构完整性 | 9层存储架构                        | 9层存储架构                        | ✅ 相同 |
  | 文档存储  | full_docs + doc_status        | full_docs + doc_status        | ✅ 相同 |
  | 向量存储  | entities/relations/chunks_vdb | entities/relations/chunks_vdb | ✅ 相同 |
  | 图存储   | chunk_entity_relation_graph   | chunk_entity_relation_graph   | ✅ 相同 |
  | 依赖追踪  | source_id机制                   | source_id机制                   | ✅ 相同 |
  | 删除机制  | 级联删除+重建                       | 级联删除+重建                       | ✅ 相同 |


  是的，所有数据库存储文件都应该在RAG-Anything\rag_storage文件夹中

  完整的LightRAG存储文件列表

  向量数据库存储 (3个):
  - vdb_entities.json - 实体向量数据库
  - vdb_relationships.json - 关系向量数据库
  - vdb_chunks.json - 文本块向量数据库

  KV键值存储 (6个):
  - kv_store_full_docs.json - 原始文档完整内容
  - kv_store_text_chunks.json - 文本块内容和元数据
  - kv_store_doc_status.json - 文档处理状态 ✅ (已存在)
  - kv_store_chunk_entity_relation.json - 知识图谱数据
  - kv_store_full_entities.json - 实体完整元数据
  - kv_store_full_relations.json - 关系完整元数据
  - kv_store_llm_response_cache.json - LLM响应缓存 ✅ (已存在)
  - kv_store_parse_cache.json - 解析结果缓存 ✅ (已存在)


  📁 RAG-Anything目录结构作用对比

  /rag_storage 目录 - LightRAG知识库存储

  作用: LightRAG的核心数据存储目录
  内容: 知识图谱、向量数据库、文档状态等
  文件类型:
    - kv_store_*.json: KV键值存储
    - vdb_*.json: 向量数据库存储
    - 知识图谱和实体关系数据

  目前状态: 只有3个文件(大部分文档处理未完成)
  预期状态: 应有9个存储文件(文档处理完成后)

  /output 目录 - 解析器输出存储

  作用: MinerU/Docling解析器的原始输出目录
  内容: 文档解析的中间结果和提取内容
  文件结构:
    /{文档名}/
      /auto/                    # 解析方法目录
        /{文档名}_content_list.json    # 结构化内容列表
        /{文档名}_model.json          # 文档模型数据
        /{文档名}_middle.json         # 中间处理结果
        /{文档名}.md                  # Markdown格式
        /{文档名}_layout.pdf          # 布局PDF
        /{文档名}_origin.pdf          # 原始PDF
        /{文档名}_span.pdf            # 跨度PDF
        /images/                     # 提取的图片文件
          /{hash}.jpg               # 图片文件(按内容hash命名)

  用途: 为RAG-Anything提供结构化的解析输入

  🔄 两个目录的关系

  文档解析流程:
  原始文档 → MinerU/Docling解析 → /output/{文档名}/ → 内容提取 → /rag_storage/ (LightRAG存储)

  具体路径:
  1. 上传到 /uploads/{文件名}
  2. 解析到 /output/{文档名}/auto/{文档名}_content_list.json
  3. 处理到 /rag_storage/vdb_*.json + kv_store_*.json

  📊 数据对比

  解析输出(/output):
  - 原始解析结果，按文档组织
  - 包含图片、表格、文本的原始提取
  - 文件较大，包含完整布局信息

  知识存储(/rag_storage):
  - 处理后的知识图谱数据
  - 按实体、关系、向量组织
  - 优化存储，支持检索和推理

  所以/output是解析器的工作目录，/rag_storage是LightRAG的数据库目录。两者分工明确，output负责文档解析，
  rag_storage负责知识存储！

adelete_by_doc_id() 不是简单的"删除文件"。在我们的系统中，一个文档删除会：                                 │
│                                                                                                                │
│     1. 向量数据库清理 → vdb_chunks.json, vdb_entities.json, vdb_relationships.json                             │
│     2. 图数据库更新 → graph_chunk_entity_relation.graphml                                                      │
│     3. 状态存储同步 → kv_store_doc_status.json, kv_store_full_docs.json                                        │
│     4. 知识图谱重建 → 受影响实体/关系的智能更新
vdb_chunks.json, vdb_entities.json, vdb_relationships.json graph_chunk_entity_relation.graphml kv_store_doc_status.json, kv_store_full_docs.json

LightRAG已经初始化