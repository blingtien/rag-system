<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG-Anything Web UI 演示</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap');
        
        /* 强制使用中文字体 */
        * {
            font-family: "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "WenQuanYi Micro Hei", "SimSun", sans-serif !important;
        }
        
        /* 确保中文字符正确显示 */
        body, html {
            font-family: "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "WenQuanYi Micro Hei", "SimSun", sans-serif !important;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* 特别处理中文文本 */
        .chinese-text {
            font-family: "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "WenQuanYi Micro Hei", "SimSun", sans-serif !important;
            font-weight: 400;
        }
        
        /* 自定义动画 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        /* 加载动画 */
        .loading {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <div class="min-h-screen flex">
        <!-- 侧边栏 -->
        <div class="w-64 bg-white dark:bg-gray-800 shadow-lg">
            <div class="p-6">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold">R</span>
                    </div>
                    <h1 class="text-xl font-bold text-gray-900 dark:text-white">RAG-Anything</h1>
                </div>
            </div>
            
            <nav class="mt-6">
                <div class="px-4 space-y-2">
                    <button onclick="showSection('overview')" class="nav-btn w-full text-left px-4 py-2 rounded-lg flex items-center space-x-3 text-gray-700 hover:bg-blue-50 hover:text-blue-700">
                        <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                        <span>概览</span>
                    </button>
                    <button onclick="showSection('upload')" class="nav-btn w-full text-left px-4 py-2 rounded-lg flex items-center space-x-3 text-gray-700 hover:bg-blue-50 hover:text-blue-700">
                        <i data-lucide="upload" class="w-5 h-5"></i>
                        <span>文档管理</span>
                    </button>
                    <button onclick="showSection('query')" class="nav-btn w-full text-left px-4 py-2 rounded-lg flex items-center space-x-3 text-gray-700 hover:bg-blue-50 hover:text-blue-700">
                        <i data-lucide="message-square" class="w-5 h-5"></i>
                        <span>智能查询</span>
                    </button>
                    <button onclick="showSection('status')" class="nav-btn w-full text-left px-4 py-2 rounded-lg flex items-center space-x-3 text-gray-700 hover:bg-blue-50 hover:text-blue-700">
                        <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                        <span>系统状态</span>
                    </button>
                    <button onclick="showSection('config')" class="nav-btn w-full text-left px-4 py-2 rounded-lg flex items-center space-x-3 text-gray-700 hover:bg-blue-50 hover:text-blue-700">
                        <i data-lucide="settings" class="w-5 h-5"></i>
                        <span>配置</span>
                    </button>
                </div>
            </nav>
        </div>

        <!-- 主内容区 -->
        <div class="flex-1 p-8 overflow-auto">
            <!-- 概览页面 -->
            <div id="overview" class="section">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">RAG-Anything 仪表盘</h2>
                    <p class="text-gray-600 dark:text-gray-300 mt-2">多模态检索增强生成系统控制中心</p>
                </div>

                <!-- 统计卡片 -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-blue-50 p-6 rounded-lg border border-blue-200">
                        <div class="flex items-center">
                            <i data-lucide="file-text" class="w-8 h-8 text-blue-600"></i>
                            <div class="ml-4">
                                <p class="text-blue-600 text-sm font-medium">已处理文档</p>
                                <p class="text-2xl font-bold text-blue-900" id="doc-count">24</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-6 rounded-lg border border-green-200">
                        <div class="flex items-center">
                            <i data-lucide="message-square" class="w-8 h-8 text-green-600"></i>
                            <div class="ml-4">
                                <p class="text-green-600 text-sm font-medium">查询次数</p>
                                <p class="text-2xl font-bold text-green-900" id="query-count">156</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 p-6 rounded-lg border border-purple-200">
                        <div class="flex items-center">
                            <i data-lucide="database" class="w-8 h-8 text-purple-600"></i>
                            <div class="ml-4">
                                <p class="text-purple-600 text-sm font-medium">知识块</p>
                                <p class="text-2xl font-bold text-purple-900">1,247</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-orange-50 p-6 rounded-lg border border-orange-200">
                        <div class="flex items-center">
                            <i data-lucide="bar-chart-3" class="w-8 h-8 text-orange-600"></i>
                            <div class="ml-4">
                                <p class="text-orange-600 text-sm font-medium">系统状态</p>
                                <p class="text-lg font-bold text-orange-900" id="system-status">正常</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 快速操作 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg border">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">快速操作</h3>
                        <div class="space-y-3">
                            <button onclick="showSection('upload')" class="w-full text-left p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors">
                                <div class="flex items-center">
                                    <i data-lucide="upload" class="w-5 h-5 text-blue-600 mr-3"></i>
                                    <span class="text-blue-900">上传新文档</span>
                                </div>
                            </button>
                            <button onclick="showSection('query')" class="w-full text-left p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors">
                                <div class="flex items-center">
                                    <i data-lucide="message-square" class="w-5 h-5 text-green-600 mr-3"></i>
                                    <span class="text-green-900">开始查询</span>
                                </div>
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg border">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">最近活动</h3>
                        <div class="space-y-3 text-sm">
                            <div class="flex items-center text-gray-600">
                                <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                                <span>文档 "research_paper.pdf" 处理完成</span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mr-3"></div>
                                <span>执行了查询: "机器学习的应用场景"</span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <div class="w-2 h-2 bg-purple-500 rounded-full mr-3"></div>
                                <span>更新了系统配置</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 查询页面 -->
            <div id="query" class="section hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">智能查询</h2>
                    <p class="text-gray-600 mt-2">基于多模态RAG系统的智能问答</p>
                </div>

                <!-- 查询模式选择 -->
                <div class="bg-white p-4 rounded-lg border mb-6">
                    <h3 class="text-sm font-medium text-gray-900 mb-3">查询模式</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                        <button onclick="setQueryMode('local')" class="query-mode-btn p-2 text-sm rounded-lg border bg-gray-50 text-gray-600 hover:bg-gray-100" data-mode="local">本地查询</button>
                        <button onclick="setQueryMode('global')" class="query-mode-btn p-2 text-sm rounded-lg border bg-gray-50 text-gray-600 hover:bg-gray-100" data-mode="global">全局查询</button>
                        <button onclick="setQueryMode('hybrid')" class="query-mode-btn p-2 text-sm rounded-lg border bg-blue-50 border-blue-300 text-blue-700" data-mode="hybrid">混合查询</button>
                        <button onclick="setQueryMode('naive')" class="query-mode-btn p-2 text-sm rounded-lg border bg-gray-50 text-gray-600 hover:bg-gray-100" data-mode="naive">简单查询</button>
                    </div>
                </div>

                <!-- 查询输入 -->
                <div class="bg-white p-6 rounded-lg border mb-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">输入您的问题</label>
                            <textarea id="query-input" class="w-full p-3 border rounded-lg resize-none" rows="4" placeholder="例如：请分析这个表格中的数据趋势..."></textarea>
                        </div>

                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button class="p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg" title="添加图片">
                                    <i data-lucide="image" class="w-5 h-5"></i>
                                </button>
                                <button class="p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg" title="添加表格">
                                    <i data-lucide="table" class="w-5 h-5"></i>
                                </button>
                                <button class="p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg" title="添加公式">
                                    <i data-lucide="calculator" class="w-5 h-5"></i>
                                </button>
                            </div>

                            <button onclick="executeQuery()" id="query-btn" class="flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">
                                <i data-lucide="send" class="w-4 h-4"></i>
                                <span>发送查询</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 查询结果 -->
                <div id="query-results" class="space-y-4">
                    <!-- 结果将在这里显示 -->
                </div>
            </div>

            <!-- 系统状态页面 -->
            <div id="status" class="section hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">系统状态</h2>
                    <p class="text-gray-600 mt-2">监控RAG系统的运行状态和性能指标</p>
                </div>

                <!-- 系统指标 -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg border">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="cpu" class="w-5 h-5 text-blue-600"></i>
                                <span class="text-sm font-medium text-gray-900">CPU使用率</span>
                            </div>
                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full">正常</span>
                        </div>
                        <div class="text-2xl font-bold text-gray-900" id="cpu-usage">45.2%</div>
                    </div>

                    <div class="bg-white p-6 rounded-lg border">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="hard-drive" class="w-5 h-5 text-green-600"></i>
                                <span class="text-sm font-medium text-gray-900">内存使用率</span>
                            </div>
                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full">警告</span>
                        </div>
                        <div class="text-2xl font-bold text-gray-900" id="memory-usage">68.1%</div>
                    </div>

                    <div class="bg-white p-6 rounded-lg border">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="database" class="w-5 h-5 text-purple-600"></i>
                                <span class="text-sm font-medium text-gray-900">磁盘使用率</span>
                            </div>
                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full">正常</span>
                        </div>
                        <div class="text-2xl font-bold text-gray-900">32.4%</div>
                    </div>

                    <div class="bg-white p-6 rounded-lg border">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="zap" class="w-5 h-5 text-orange-600"></i>
                                <span class="text-sm font-medium text-gray-900">GPU使用率</span>
                            </div>
                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full">正常</span>
                        </div>
                        <div class="text-2xl font-bold text-gray-900" id="gpu-usage">78.3%</div>
                    </div>
                </div>

                <!-- 服务状态 -->
                <div class="bg-white p-6 rounded-lg border">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">服务状态</h3>
                    <div id="service-status" class="space-y-4">
                        <!-- 服务状态将通过API加载 -->
                    </div>
                </div>
            </div>

            <!-- 文档上传页面 -->
            <div id="upload" class="section hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">文档管理</h2>
                    <p class="text-gray-600 mt-2">上传并处理各种格式的文档</p>
                </div>

                <!-- 上传区域 -->
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-8 hover:border-blue-400 hover:bg-blue-50 transition-all">
                    <i data-lucide="upload" class="w-12 h-12 text-gray-400 mx-auto mb-4"></i>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">拖拽文件到此处或点击上传</h3>
                    <p class="text-gray-600 mb-4">支持多种文档格式，包括 PDF、Word、PowerPoint、图片等</p>
                    <input type="file" multiple id="file-input" class="hidden" accept=".pdf,.doc,.docx,.ppt,.pptx,.txt,.md,.jpg,.jpeg,.png,.gif,.bmp,.tiff,.webp">
                    <button onclick="document.getElementById('file-input').click()" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        <i data-lucide="upload" class="w-4 h-4 mr-2"></i>
                        选择文件
                    </button>
                </div>

                <!-- 支持格式 -->
                <div class="bg-white p-6 rounded-lg border mb-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">支持的文件格式</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4">
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-2xl mb-2">📄</div>
                            <div class="text-xs font-medium">.pdf</div>
                            <div class="text-xs text-gray-600">PDF文档</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-2xl mb-2">📝</div>
                            <div class="text-xs font-medium">.docx</div>
                            <div class="text-xs text-gray-600">Word文档</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-2xl mb-2">📊</div>
                            <div class="text-xs font-medium">.pptx</div>
                            <div class="text-xs text-gray-600">PowerPoint演示</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-2xl mb-2">📋</div>
                            <div class="text-xs font-medium">.txt</div>
                            <div class="text-xs text-gray-600">文本文件</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-2xl mb-2">📔</div>
                            <div class="text-xs font-medium">.md</div>
                            <div class="text-xs text-gray-600">Markdown文件</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-2xl mb-2">🖼️</div>
                            <div class="text-xs font-medium">.jpg</div>
                            <div class="text-xs text-gray-600">图片文件</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div class="text-2xl mb-2">🖼️</div>
                            <div class="text-xs font-medium">.png</div>
                            <div class="text-xs text-gray-600">图片文件</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 配置页面 -->
            <div id="config" class="section hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">系统配置</h2>
                    <p class="text-gray-600 mt-2">管理RAG系统的各项配置参数</p>
                </div>

                <div class="bg-white p-6 rounded-lg border">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">连接测试</h3>
                    <button onclick="testConnection()" class="flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        <i data-lucide="wifi" class="w-4 h-4"></i>
                        <span>测试API连接</span>
                    </button>
                    <div id="connection-result" class="mt-4"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentQueryMode = 'hybrid';

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            loadSystemStatus();
            
            // 设置默认激活的导航项
            showSection('overview');
        });

        // 显示指定部分
        function showSection(sectionId) {
            // 隐藏所有section
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // 显示指定section
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById(sectionId).classList.add('animate-fade-in');
            
            // 更新导航按钮状态
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-50', 'text-blue-700');
                btn.classList.add('text-gray-700', 'hover:bg-blue-50', 'hover:text-blue-700');
            });
            
            // 激活当前按钮 - 修复event未定义的问题
            const targetBtn = document.querySelector(`[onclick="showSection('${sectionId}')"]`);
            if (targetBtn) {
                targetBtn.classList.add('bg-blue-50', 'text-blue-700');
                targetBtn.classList.remove('text-gray-700');
            }
        }

        // 设置查询模式
        function setQueryMode(mode) {
            currentQueryMode = mode;
            
            // 更新按钮状态
            document.querySelectorAll('.query-mode-btn').forEach(btn => {
                btn.classList.remove('bg-blue-50', 'border-blue-300', 'text-blue-700');
                btn.classList.add('bg-gray-50', 'text-gray-600');
            });
            
            // 激活选中的按钮
            const selectedBtn = document.querySelector(`[data-mode="${mode}"]`);
            selectedBtn.classList.add('bg-blue-50', 'border-blue-300', 'text-blue-700');
            selectedBtn.classList.remove('bg-gray-50', 'text-gray-600');
        }

        // 执行查询
        async function executeQuery() {
            const queryInput = document.getElementById('query-input');
            const queryBtn = document.getElementById('query-btn');
            const resultsContainer = document.getElementById('query-results');
            
            if (!queryInput.value.trim()) {
                alert('请输入查询内容');
                return;
            }
            
            // 显示加载状态
            queryBtn.innerHTML = '<div class="loading"></div><span>查询中...</span>';
            queryBtn.disabled = true;
            
            try {
                const response = await fetch('http://localhost:8000/api/v1/query', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        query: queryInput.value,
                        mode: currentQueryMode
                    })
                });
                
                const result = await response.json();
                
                // 显示结果
                const resultHtml = `
                    <div class="bg-white p-6 rounded-lg border animate-fade-in">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex-1">
                                <h4 class="font-medium text-gray-900 mb-1">${queryInput.value}</h4>
                                <div class="flex items-center space-x-4 text-xs text-gray-500">
                                    <span>${new Date(result.timestamp).toLocaleString()}</span>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full">${result.mode}</span>
                                    <span>耗时: ${(result.processing_time * 1000).toFixed(1)}ms</span>
                                </div>
                            </div>
                        </div>
                        <div class="text-gray-700 whitespace-pre-wrap">${result.result}</div>
                    </div>
                `;
                
                resultsContainer.insertAdjacentHTML('afterbegin', resultHtml);
                
                // 清空输入框
                queryInput.value = '';
                
                // 更新统计数据
                const queryCount = document.getElementById('query-count');
                queryCount.textContent = parseInt(queryCount.textContent) + 1;
                
            } catch (error) {
                console.error('查询失败:', error);
                alert('查询失败，请检查API连接');
            }
            
            // 恢复按钮状态
            queryBtn.innerHTML = '<i data-lucide="send" class="w-4 h-4"></i><span>发送查询</span>';
            queryBtn.disabled = false;
            lucide.createIcons();
        }

        // 加载系统状态
        async function loadSystemStatus() {
            try {
                const response = await fetch('http://localhost:8000/api/system/status');
                const data = await response.json();
                
                // 更新指标
                document.getElementById('cpu-usage').textContent = data.metrics.cpu_usage + '%';
                document.getElementById('memory-usage').textContent = data.metrics.memory_usage + '%';
                document.getElementById('gpu-usage').textContent = data.metrics.gpu_usage + '%';
                document.getElementById('system-status').textContent = data.status === 'healthy' ? '正常' : '异常';
                
                // 更新统计数据
                document.getElementById('doc-count').textContent = data.processing_stats.documents_processed;
                document.getElementById('query-count').textContent = data.processing_stats.queries_handled;
                
                // 更新知识块数据 - 显示chunks数量
                if (data.processing_stats.knowledge_blocks !== undefined) {
                    document.querySelector('.text-purple-900').textContent = data.processing_stats.knowledge_blocks.toLocaleString();
                }
                
                // 更新服务状态
                const serviceStatusContainer = document.getElementById('service-status');
                let servicesHtml = '';
                
                Object.entries(data.services).forEach(([name, service]) => {
                    const statusColor = service.status === 'running' ? 'bg-green-500' : 'bg-red-500';
                    const statusText = service.status === 'running' ? '运行中' : '已停止';
                    
                    servicesHtml += `
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 ${statusColor} rounded-full"></div>
                                <span class="font-medium text-gray-900">${name}</span>
                            </div>
                            <div class="text-right">
                                <div class="text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full">${statusText}</div>
                                <div class="text-xs text-gray-500 mt-1">运行时间: ${service.uptime}</div>
                            </div>
                        </div>
                    `;
                });
                
                serviceStatusContainer.innerHTML = servicesHtml;
                
            } catch (error) {
                console.error('加载系统状态失败:', error);
            }
        }

        // 测试连接
        async function testConnection() {
            const resultDiv = document.getElementById('connection-result');
            resultDiv.innerHTML = '<div class="flex items-center space-x-2"><div class="loading"></div><span>测试中...</span></div>';
            
            try {
                const response = await fetch('http://localhost:8000/health');
                const data = await response.json();
                
                if (response.ok) {
                    resultDiv.innerHTML = `
                        <div class="flex items-center space-x-2 text-green-600">
                            <i data-lucide="check-circle" class="w-4 h-4"></i>
                            <span>连接成功！API服务器运行正常</span>
                        </div>
                    `;
                } else {
                    throw new Error('API响应异常');
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="flex items-center space-x-2 text-red-600">
                        <i data-lucide="x-circle" class="w-4 h-4"></i>
                        <span>连接失败：${error.message}</span>
                    </div>
                `;
            }
            
            lucide.createIcons();
        }

        // 定期更新状态
        setInterval(loadSystemStatus, 30000); // 每30秒更新一次
    </script>
</body>
</html>